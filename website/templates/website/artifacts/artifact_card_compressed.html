{% load static %}
{% load other %}
{% load artifacts %}
{% load monsters %}

<div class='card-custom bordered standard' onClick="moveTo('{% url 'artifact_by_id' arg_id=artifact.id %}')" style="cursor: pointer;">
    <div class='card-custom-header'>
        +{{ artifact.level }} {{ artifact.get_quality_display }}
        {% if artifact.rtype == 1 %} {{ artifact.get_attribute_display }}{% else %}{{ artifact.get_archetype_display }}{% endif %} Artifact
    </div>
    <div class='card-custom-body standard'>
        <div class='artifact-prim'>
            {% if artifact.rtype == 1 %}
                <img src="{% static 'website/images/artifacts/artifact_'|add_str:artifact.get_attribute_display|lower|add_str:".png" %}" class="table-monster-avatar" />
            {% else %}
                <img src="{% static 'website/images/artifacts/artifact_'|add_str:artifact.get_archetype_display|lower|add_str:".png" %}" class="table-monster-avatar" />
            {% endif %}
            <div class='artifact-stats'>
                {{ artifact.get_primary_display }}
            </div>
        </div>

        <div class='artifact-substats'>
            {% for substat in artifact.substats|parse_artifact_substats_to_table:artifact.substats_values %}
                <span class='substat'>{{ substat.name }}</span> {{ substat.value }}%<br />
            {% endfor %}
        </div>

        <div class='artifact-info'>
            <span class='substat'>Efficiency</span> {{ artifact.efficiency }}%<br />
            <span class='substat'>Efficiency Max</span> {{ artifact.efficiency_max }}%<br />
            <span class='substat'>Locked</span> {% if artifact.locked %}<span style="color: #00aa00">Yes</span>{% else %}<span style="color: #ff0000">No</span>{% endif %}<br />
            <span class='substat'>Equipped</span>
                {% if artifact.equipped %}
                    {% with artifact|get_monster as mon %}
                        {% if mon %}
                            {% with mon.id|randomize as rand_mon_id %}
                                <a href="{% url 'monster_by_id' arg_id=mon.id %}" class="table-monster-href">
                                    <img src="{% static 'website/images/monsters/'|get_monster_avatar:mon %}" class="table-monster-avatar-min {% if not deep %}tip{% endif %}" {% if not deep %}data-tip="mon-{{ rand_mon_id }}"{% endif %} onmouseenter="ajaxTooltip({{ mon.id }}, 'mon', '{{ rand_mon_id }}', this, '{% url 'object_card' obj_type='mon' obj_id=mon.id %}')" onmouseleave="ajaxTooltipLeave(this)" />
                                </a>
                                {% if not deep %}
                                    <div id="mon-{{ rand_mon_id }}" class="tip-content" style='display: none;'>
                                        <div class='card-custom disclaimer'>
                                            <div class='card-custom-header'>
                                                Loading...
                                            </div>
                                            <div class='card-custom-body'>
                                                Loading...
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endwith %}
                        {% else %}
                            <img src="{% static 'website/images/monsters/monster_unknown.png' %}" class="table-monster-avatar-min"/>
                        {% endif %}
                    {% endwith %}
                {% else %}
                    <span style="color: #ff0000">No</span>
                {% endif %}
                <br />
            <span class='substat'>Equipped RTA</span>
                {% if artifact.equipped_rta %}
                    {% with artifact|get_monster:True as mon %}
                        {% if mon %}
                            {% with mon.id|randomize as rand_mon_id %}
                                <a href="{% url 'monster_by_id' arg_id=mon.id %}" class="table-monster-href">
                                    <img src="{% static 'website/images/monsters/'|get_monster_avatar:mon %}" class="table-monster-avatar-min {% if not deep %}tip{% endif %}" {% if not deep %}data-tip="mon-{{ rand_mon_id }}"{% endif %} onmouseenter="ajaxTooltip({{ mon.id }}, 'mon', '{{ rand_mon_id }}', this, '{% url 'object_card' obj_type='mon' obj_id=mon.id %}')" onmouseleave="ajaxTooltipLeave(this)" />
                                </a>
                                {% if not deep %}
                                    <div id="mon-{{ rand_mon_id }}" class="tip-content" style='display: none;'>
                                        <div class='card-custom disclaimer'>
                                            <div class='card-custom-header'>
                                                Loading...
                                            </div>
                                            <div class='card-custom-body'>
                                                Loading...
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endwith %}
                        {% else %}
                            <img src="{% static 'website/images/monsters/monster_unknown.png' %}" class="table-monster-avatar-min"/>
                        {% endif %}
                    {% endwith %}
                {% else %}
                    <span style="color: #ff0000">No</span>
                {% endif %}
        </div>
    </div>
</div>
<script src="{% static 'website/js/tooltip.js' %}" />