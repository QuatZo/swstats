{% load static %}
{% load check_skillups %}
{% load international_date %}
{% load add_str %}
{% load add_reverse_str %}
{% load get_monster_avatar %}
{% load get_sets %}
{% load get_set_names %}

<div class="table-responsive title-container">
    <h2 class="title">
		Monster's Table
	</h2>
	<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#monster-table" aria-expanded="true" aria-controls="#monster-table"> 
		Show/Hide 
	</button>
    <div id="monster-table" class="collapse">
        <table class="table table-hover table-sm report">
            <thead>
                <tr>
                    <th scope="col">Level</th>
                    <th scope="col">Stars</th>
                    <th scope="col">HP</th>
                    <th scope="col">Attack</th>
                    <th scope="col">Defense</th>
                    <th scope="col">Speed</th>
                    <th scope="col">Res</th>
                    <th scope="col">Acc</th>
                    <th scope="col">CRate</th>
                    <th scope="col">CDmg</th>
                    <th scope="col">Avg Eff</th>
                    <th scope="col">Eff. HP</th>
                    <th scope="col">Eff. HP D-B</th>
                    <th scope="col">Sets</th>
                    <th scope="col">Skilled Up</th>
                    <th scope="col">Acquired</th>
                    <th scope="col">Rune #1</th>
                    <th scope="col">Rune #2</th>
                    <th scope="col">Rune #3</th>
                    <th scope="col">Rune #4</th>
                    <th scope="col">Rune #5</th>
                    <th scope="col">Rune #6</th>
                </tr>
            </thead>
            <tbody>
                {% for monster in monsters %}
                    <tr>
                        <td>{{ monster.level }}</td>
                        <td>{{ monster.stars }}</td>
                        <td>{{ monster.hp }}</td>
                        <td>{{ monster.attack }}</td>
                        <td>{{ monster.defense }}</td>
                        <td>{{ monster.speed }}</td>
                        <td>{{ monster.res }}</td>
                        <td>{{ monster.acc }}</td>
                        <td>{{ monster.crit_rate }}</td>
                        <td>{{ monster.crit_dmg }}</td>
                        <td>{{ monster.avg_eff }}</td>
                        <td>{{ monster.eff_hp }}</td>
                        <td>{{ monster.eff_hp_def_break }}</td>
                        <td>
                            {% if monster.runes.count > 0 %}
                                {% with monster.runes.all|get_sets as sets %}
                                    {% if sets %}
                                        {{ monster.runes.all|get_set_names }}
                                    {% else %}
                                        Broken
                                    {% endif %}
                                {% endwith %}
                            {% endif %}
                        </td>
                        <td>{% if monster|check_skillups %}
                                Yes
                            {% else %}
                                No
                            {% endif %}
                        </td>
                        <td>{{ monster.created|international_date }}</td>
                        {% for monster_runes in monsters_runes %}
                            {% if monster_runes.monster == monster %}
                                {% for rune in monster_runes.runes %}
                                    <td>{{ rune.get_primary_display }}</td>
                                {% endfor %}
                            {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <div id="paging-table"></div>
    </div>
</div>